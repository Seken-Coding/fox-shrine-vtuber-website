{"ast":null,"code":"var _jsxFileName = \"X:\\\\GitHub-Repo\\\\fox-shrine-vtuber-website\\\\fox-shrine-vtuber\\\\src\\\\hooks\\\\useAuth.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport { createContext, useContext, useState, useEffect, useMemo, useCallback } from 'react';\n\n// Authentication Context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext(null);\n\n// API Base URL\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3002/api';\n\n// Authentication Provider Component\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  // Get stored token\n  const getStoredToken = useCallback(() => {\n    return localStorage.getItem('foxshrine_access_token');\n  }, []);\n\n  // Store token\n  const storeTokens = useCallback(tokens => {\n    localStorage.setItem('foxshrine_access_token', tokens.accessToken);\n    localStorage.setItem('foxshrine_refresh_token', tokens.refreshToken);\n  }, []);\n\n  // Clear stored tokens\n  const clearTokens = useCallback(() => {\n    localStorage.removeItem('foxshrine_access_token');\n    localStorage.removeItem('foxshrine_refresh_token');\n  }, []);\n\n  // API call helper with authentication\n  const apiCall = useCallback(async (endpoint, options = {}) => {\n    const token = getStoredToken();\n    const headers = {\n      'Content-Type': 'application/json',\n      ...options.headers\n    };\n    if (token) {\n      headers.Authorization = `Bearer ${token}`;\n    }\n    const response = await fetch(`${API_BASE_URL}${endpoint}`, {\n      ...options,\n      headers\n    });\n    if (response.status === 401 && token) {\n      // Token expired, clear it and redirect to login\n      clearTokens();\n      setUser(null);\n      throw new Error('Session expired');\n    }\n    return response;\n  }, [getStoredToken, clearTokens]);\n\n  // Load user profile\n  const loadUserProfile = useCallback(async () => {\n    try {\n      const token = getStoredToken();\n      if (!token) {\n        setLoading(false);\n        return;\n      }\n      const response = await apiCall('/auth/profile');\n      if (response.ok) {\n        const data = await response.json();\n        setUser(data.user);\n      } else {\n        clearTokens();\n        setUser(null);\n      }\n    } catch (error) {\n      console.error('Failed to load user profile:', error);\n      clearTokens();\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  }, [getStoredToken, apiCall, clearTokens]);\n\n  // Login function\n  const login = useCallback(async (username, password) => {\n    try {\n      setError(null);\n      const response = await fetch(`${API_BASE_URL}/auth/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      const data = await response.json();\n      if (response.ok) {\n        storeTokens(data.tokens);\n        setUser(data.user);\n        return {\n          success: true,\n          user: data.user\n        };\n      } else {\n        setError(data.error || 'Login failed');\n        return {\n          success: false,\n          error: data.error || 'Login failed'\n        };\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      const errorMessage = 'Network error. Please try again.';\n      setError(errorMessage);\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  }, [storeTokens]);\n\n  // Register function\n  const register = useCallback(async userData => {\n    try {\n      setError(null);\n      const response = await fetch(`${API_BASE_URL}/auth/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        storeTokens(data.tokens);\n        setUser(data.user);\n        return {\n          success: true,\n          user: data.user\n        };\n      } else {\n        setError(data.error || 'Registration failed');\n        return {\n          success: false,\n          error: data.error || 'Registration failed'\n        };\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      const errorMessage = 'Network error. Please try again.';\n      setError(errorMessage);\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  }, [storeTokens]);\n\n  // Logout function\n  const logout = useCallback(async () => {\n    try {\n      await apiCall('/auth/logout', {\n        method: 'POST'\n      });\n    } catch (error) {\n      console.error('Logout error:', error);\n    } finally {\n      clearTokens();\n      setUser(null);\n    }\n  }, [apiCall, clearTokens]);\n\n  // Check if user has permission\n  const hasPermission = useCallback(permission => {\n    return user && user.permissions && user.permissions.includes(permission);\n  }, [user]);\n\n  // Check if user has role\n  const hasRole = useCallback(role => {\n    return user && user.role === role;\n  }, [user]);\n\n  // Check if user is admin (Admin or Super Admin)\n  const isAdmin = useCallback(() => {\n    return user && (user.role === 'Admin' || user.role === 'Super Admin');\n  }, [user]);\n\n  // Check if user is authenticated\n  const isAuthenticated = useCallback(() => {\n    return !!user;\n  }, [user]);\n\n  // Update user profile\n  const updateProfile = useCallback(async profileData => {\n    try {\n      setError(null);\n      const response = await apiCall('/auth/profile', {\n        method: 'PUT',\n        body: JSON.stringify(profileData)\n      });\n      const data = await response.json();\n      if (response.ok) {\n        setUser(data.user);\n        return {\n          success: true,\n          user: data.user\n        };\n      } else {\n        setError(data.error || 'Profile update failed');\n        return {\n          success: false,\n          error: data.error || 'Profile update failed'\n        };\n      }\n    } catch (error) {\n      console.error('Profile update error:', error);\n      const errorMessage = 'Network error. Please try again.';\n      setError(errorMessage);\n      return {\n        success: false,\n        error: errorMessage\n      };\n    }\n  }, [apiCall]);\n\n  // Load user on component mount\n  useEffect(() => {\n    loadUserProfile();\n  }, [loadUserProfile]);\n  const value = useMemo(() => ({\n    user,\n    loading,\n    error,\n    login,\n    register,\n    logout,\n    updateProfile,\n    hasPermission,\n    hasRole,\n    isAdmin,\n    isAuthenticated,\n    apiCall,\n    setError\n  }), [user, loading, error, login, register, logout, updateProfile, hasPermission, hasRole, isAdmin, isAuthenticated, apiCall]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 9\n  }, this);\n};\n\n// Custom hook to use authentication\n_s(AuthProvider, \"au1/jBzM0Jo24HdM94fao9sIf+U=\");\n_c = AuthProvider;\nexport const useAuth = () => {\n  _s2();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\n// Higher-order component for protected routes\n_s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const withAuth = (Component, requiredPermission = null, requiredRole = null) => {\n  var _s3 = $RefreshSig$();\n  return _s3(function AuthenticatedComponent(props) {\n    _s3();\n    const {\n      user,\n      loading,\n      hasPermission,\n      hasRole\n    } = useAuth();\n    if (loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 17\n      }, this);\n    }\n    if (!user) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold\",\n            children: \"Access Denied!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"block sm:inline\",\n            children: \" You must be logged in to access this page.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 17\n      }, this);\n    }\n    if (requiredPermission && !hasPermission(requiredPermission)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold\",\n            children: \"Permission Denied!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"block sm:inline\",\n            children: [\" You don't have the required permission: \", requiredPermission]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 17\n      }, this);\n    }\n    if (requiredRole && !hasRole(requiredRole)) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center min-h-screen\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"font-bold\",\n            children: \"Role Required!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"block sm:inline\",\n            children: [\" You must have the role: \", requiredRole]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 17\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 16\n    }, this);\n  }, \"gi6wlfhVPijClVyKYWnvvKUKs1k=\", false, function () {\n    return [useAuth];\n  });\n};\n\n// Permission-based component wrapper\nexport const PermissionGate = ({\n  children,\n  permission = null,\n  role = null,\n  fallback = null,\n  adminOnly = false\n}) => {\n  _s4();\n  const {\n    user,\n    hasPermission,\n    hasRole,\n    isAdmin\n  } = useAuth();\n  if (!user) {\n    return fallback || null;\n  }\n  if (adminOnly && !isAdmin()) {\n    return fallback || null;\n  }\n  if (permission && !hasPermission(permission)) {\n    return fallback || null;\n  }\n  if (role && !hasRole(role)) {\n    return fallback || null;\n  }\n  return children;\n};\n_s4(PermissionGate, \"GbVXi8+WnmyvFMMF+afSMpSIFt4=\", false, function () {\n  return [useAuth];\n});\n_c2 = PermissionGate;\nexport default AuthContext;\nvar _c, _c2;\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"PermissionGate\");","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useMemo","useCallback","jsxDEV","_jsxDEV","AuthContext","API_BASE_URL","process","env","REACT_APP_API_URL","AuthProvider","children","_s","user","setUser","loading","setLoading","error","setError","getStoredToken","localStorage","getItem","storeTokens","tokens","setItem","accessToken","refreshToken","clearTokens","removeItem","apiCall","endpoint","options","token","headers","Authorization","response","fetch","status","Error","loadUserProfile","ok","data","json","console","login","username","password","method","body","JSON","stringify","success","errorMessage","register","userData","logout","hasPermission","permission","permissions","includes","hasRole","role","isAdmin","isAuthenticated","updateProfile","profileData","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useAuth","_s2","context","withAuth","Component","requiredPermission","requiredRole","_s3","$RefreshSig$","AuthenticatedComponent","props","className","PermissionGate","fallback","adminOnly","_s4","_c2","$RefreshReg$"],"sources":["X:/GitHub-Repo/fox-shrine-vtuber-website/fox-shrine-vtuber/src/hooks/useAuth.js"],"sourcesContent":["import { createContext, useContext, useState, useEffect, useMemo, useCallback } from 'react';\r\n\r\n// Authentication Context\r\nconst AuthContext = createContext(null);\r\n\r\n// API Base URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3002/api';\r\n\r\n// Authentication Provider Component\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Get stored token\r\n    const getStoredToken = useCallback(() => {\r\n        return localStorage.getItem('foxshrine_access_token');\r\n    }, []);\r\n\r\n    // Store token\r\n    const storeTokens = useCallback((tokens) => {\r\n        localStorage.setItem('foxshrine_access_token', tokens.accessToken);\r\n        localStorage.setItem('foxshrine_refresh_token', tokens.refreshToken);\r\n    }, []);\r\n\r\n    // Clear stored tokens\r\n    const clearTokens = useCallback(() => {\r\n        localStorage.removeItem('foxshrine_access_token');\r\n        localStorage.removeItem('foxshrine_refresh_token');\r\n    }, []);\r\n\r\n    // API call helper with authentication\r\n    const apiCall = useCallback(async (endpoint, options = {}) => {\r\n        const token = getStoredToken();\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            ...options.headers,\r\n        };\r\n\r\n        if (token) {\r\n            headers.Authorization = `Bearer ${token}`;\r\n        }\r\n\r\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n            ...options,\r\n            headers,\r\n        });\r\n\r\n        if (response.status === 401 && token) {\r\n            // Token expired, clear it and redirect to login\r\n            clearTokens();\r\n            setUser(null);\r\n            throw new Error('Session expired');\r\n        }\r\n\r\n        return response;\r\n    }, [getStoredToken, clearTokens]);\r\n\r\n    // Load user profile\r\n    const loadUserProfile = useCallback(async () => {\r\n        try {\r\n            const token = getStoredToken();\r\n            if (!token) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const response = await apiCall('/auth/profile');\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUser(data.user);\r\n            } else {\r\n                clearTokens();\r\n                setUser(null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load user profile:', error);\r\n            clearTokens();\r\n            setUser(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [getStoredToken, apiCall, clearTokens]);\r\n\r\n    // Login function\r\n    const login = useCallback(async (username, password) => {\r\n        try {\r\n            setError(null);\r\n            const response = await fetch(`${API_BASE_URL}/auth/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ username, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                storeTokens(data.tokens);\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Login failed');\r\n                return { success: false, error: data.error || 'Login failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Login error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    }, [storeTokens]);\r\n\r\n    // Register function\r\n    const register = useCallback(async (userData) => {\r\n        try {\r\n            setError(null);\r\n            const response = await fetch(`${API_BASE_URL}/auth/register`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(userData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                storeTokens(data.tokens);\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Registration failed');\r\n                return { success: false, error: data.error || 'Registration failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Registration error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    }, [storeTokens]);\r\n\r\n    // Logout function\r\n    const logout = useCallback(async () => {\r\n        try {\r\n            await apiCall('/auth/logout', { method: 'POST' });\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        } finally {\r\n            clearTokens();\r\n            setUser(null);\r\n        }\r\n    }, [apiCall, clearTokens]);\r\n\r\n    // Check if user has permission\r\n    const hasPermission = useCallback((permission) => {\r\n        return user && user.permissions && user.permissions.includes(permission);\r\n    }, [user]);\r\n\r\n    // Check if user has role\r\n    const hasRole = useCallback((role) => {\r\n        return user && user.role === role;\r\n    }, [user]);\r\n\r\n    // Check if user is admin (Admin or Super Admin)\r\n    const isAdmin = useCallback(() => {\r\n        return user && (user.role === 'Admin' || user.role === 'Super Admin');\r\n    }, [user]);\r\n\r\n    // Check if user is authenticated\r\n    const isAuthenticated = useCallback(() => {\r\n        return !!user;\r\n    }, [user]);\r\n\r\n    // Update user profile\r\n    const updateProfile = useCallback(async (profileData) => {\r\n        try {\r\n            setError(null);\r\n            const response = await apiCall('/auth/profile', {\r\n                method: 'PUT',\r\n                body: JSON.stringify(profileData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Profile update failed');\r\n                return { success: false, error: data.error || 'Profile update failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Profile update error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    }, [apiCall]);\r\n\r\n    // Load user on component mount\r\n    useEffect(() => {\r\n        loadUserProfile();\r\n    }, [loadUserProfile]);\r\n\r\n    const value = useMemo(() => ({\r\n        user,\r\n        loading,\r\n        error,\r\n        login,\r\n        register,\r\n        logout,\r\n        updateProfile,\r\n        hasPermission,\r\n        hasRole,\r\n        isAdmin,\r\n        isAuthenticated,\r\n        apiCall,\r\n        setError,\r\n    }), [user, loading, error, login, register, logout, updateProfile, hasPermission, hasRole, isAdmin, isAuthenticated, apiCall]);\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n// Custom hook to use authentication\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\n// Higher-order component for protected routes\r\nexport const withAuth = (Component, requiredPermission = null, requiredRole = null) => {\r\n    return function AuthenticatedComponent(props) {\r\n        const { user, loading, hasPermission, hasRole } = useAuth();\r\n\r\n        if (loading) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"></div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!user) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Access Denied!</strong>\r\n                        <span className=\"block sm:inline\"> You must be logged in to access this page.</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (requiredPermission && !hasPermission(requiredPermission)) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Permission Denied!</strong>\r\n                        <span className=\"block sm:inline\"> You don't have the required permission: {requiredPermission}</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (requiredRole && !hasRole(requiredRole)) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Role Required!</strong>\r\n                        <span className=\"block sm:inline\"> You must have the role: {requiredRole}</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <Component {...props} />;\r\n    };\r\n};\r\n\r\n// Permission-based component wrapper\r\nexport const PermissionGate = ({ \r\n    children, \r\n    permission = null, \r\n    role = null, \r\n    fallback = null, \r\n    adminOnly = false \r\n}) => {\r\n    const { user, hasPermission, hasRole, isAdmin } = useAuth();\r\n\r\n    if (!user) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (adminOnly && !isAdmin()) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (permission && !hasPermission(permission)) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (role && !hasRole(role)) {\r\n        return fallback || null;\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}