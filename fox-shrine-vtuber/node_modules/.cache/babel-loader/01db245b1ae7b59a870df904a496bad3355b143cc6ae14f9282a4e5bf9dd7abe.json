{"ast":null,"code":"import _objectSpread from\"X:/GitHub-Repo/fox-shrine-vtuber-website/fox-shrine-vtuber/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useContext,useState,useEffect}from'react';// Authentication Context\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);// API Base URL\nconst API_BASE_URL=process.env.REACT_APP_API_URL||'http://localhost:3002/api';// Authentication Provider Component\nexport const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Get stored token\nconst getStoredToken=()=>{return localStorage.getItem('foxshrine_access_token');};// Store token\nconst storeTokens=tokens=>{localStorage.setItem('foxshrine_access_token',tokens.accessToken);localStorage.setItem('foxshrine_refresh_token',tokens.refreshToken);};// Clear stored tokens\nconst clearTokens=()=>{localStorage.removeItem('foxshrine_access_token');localStorage.removeItem('foxshrine_refresh_token');};// API call helper with authentication\nconst apiCall=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=getStoredToken();const headers=_objectSpread({'Content-Type':'application/json'},options.headers);if(token){headers.Authorization=\"Bearer \".concat(token);}const response=await fetch(\"\".concat(API_BASE_URL).concat(endpoint),_objectSpread(_objectSpread({},options),{},{headers}));if(response.status===401&&token){// Token expired, clear it and redirect to login\nclearTokens();setUser(null);throw new Error('Session expired');}return response;};// Load user profile\nconst loadUserProfile=async()=>{try{const token=getStoredToken();if(!token){setLoading(false);return;}const response=await apiCall('/auth/profile');if(response.ok){const data=await response.json();setUser(data.user);}else{clearTokens();setUser(null);}}catch(error){console.error('Failed to load user profile:',error);clearTokens();setUser(null);}finally{setLoading(false);}};// Login function\nconst login=async(username,password)=>{try{setError(null);const response=await fetch(\"\".concat(API_BASE_URL,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username,password})});const data=await response.json();if(response.ok){storeTokens(data.tokens);setUser(data.user);return{success:true,user:data.user};}else{setError(data.error||'Login failed');return{success:false,error:data.error||'Login failed'};}}catch(error){console.error('Login error:',error);const errorMessage='Network error. Please try again.';setError(errorMessage);return{success:false,error:errorMessage};}};// Register function\nconst register=async userData=>{try{setError(null);const response=await fetch(\"\".concat(API_BASE_URL,\"/auth/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();if(response.ok){storeTokens(data.tokens);setUser(data.user);return{success:true,user:data.user};}else{setError(data.error||'Registration failed');return{success:false,error:data.error||'Registration failed'};}}catch(error){console.error('Registration error:',error);const errorMessage='Network error. Please try again.';setError(errorMessage);return{success:false,error:errorMessage};}};// Logout function\nconst logout=async()=>{try{await apiCall('/auth/logout',{method:'POST'});}catch(error){console.error('Logout error:',error);}finally{clearTokens();setUser(null);}};// Check if user has permission\nconst hasPermission=permission=>{return user&&user.permissions&&user.permissions.includes(permission);};// Check if user has role\nconst hasRole=role=>{return user&&user.role===role;};// Check if user is admin (Admin or Super Admin)\nconst isAdmin=()=>{return user&&(user.role==='Admin'||user.role==='Super Admin');};// Check if user is authenticated\nconst isAuthenticated=()=>{return!!user;};// Update user profile\nconst updateProfile=async profileData=>{try{setError(null);const response=await apiCall('/auth/profile',{method:'PUT',body:JSON.stringify(profileData)});const data=await response.json();if(response.ok){setUser(data.user);return{success:true,user:data.user};}else{setError(data.error||'Profile update failed');return{success:false,error:data.error||'Profile update failed'};}}catch(error){console.error('Profile update error:',error);const errorMessage='Network error. Please try again.';setError(errorMessage);return{success:false,error:errorMessage};}};// Load user on component mount\nuseEffect(()=>{loadUserProfile();},[]);const value={user,loading,error,login,register,logout,updateProfile,hasPermission,hasRole,isAdmin,isAuthenticated,apiCall,setError};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};// Custom hook to use authentication\nexport const useAuth=()=>{const context=useContext(AuthContext);if(!context){throw new Error('useAuth must be used within an AuthProvider');}return context;};// Higher-order component for protected routes\nexport const withAuth=function(Component){let requiredPermission=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;let requiredRole=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;return function AuthenticatedComponent(props){const{user,loading,hasPermission,hasRole}=useAuth();if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"})});}if(!user){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Access Denied!\"}),/*#__PURE__*/_jsx(\"span\",{className:\"block sm:inline\",children:\" You must be logged in to access this page.\"})]})});}if(requiredPermission&&!hasPermission(requiredPermission)){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Permission Denied!\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"block sm:inline\",children:[\" You don't have the required permission: \",requiredPermission]})]})});}if(requiredRole&&!hasRole(requiredRole)){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"font-bold\",children:\"Role Required!\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"block sm:inline\",children:[\" You must have the role: \",requiredRole]})]})});}return/*#__PURE__*/_jsx(Component,_objectSpread({},props));};};// Permission-based component wrapper\nexport const PermissionGate=_ref2=>{let{children,permission=null,role=null,fallback=null,adminOnly=false}=_ref2;const{user,hasPermission,hasRole,isAdmin}=useAuth();if(!user){return fallback||null;}if(adminOnly&&!isAdmin()){return fallback||null;}if(permission&&!hasPermission(permission)){return fallback||null;}if(role&&!hasRole(role)){return fallback||null;}return children;};export default AuthContext;","map":{"version":3,"names":["createContext","useContext","useState","useEffect","jsx","_jsx","jsxs","_jsxs","AuthContext","API_BASE_URL","process","env","REACT_APP_API_URL","AuthProvider","_ref","children","user","setUser","loading","setLoading","error","setError","getStoredToken","localStorage","getItem","storeTokens","tokens","setItem","accessToken","refreshToken","clearTokens","removeItem","apiCall","endpoint","options","arguments","length","undefined","token","headers","_objectSpread","Authorization","concat","response","fetch","status","Error","loadUserProfile","ok","data","json","console","login","username","password","method","body","JSON","stringify","success","errorMessage","register","userData","logout","hasPermission","permission","permissions","includes","hasRole","role","isAdmin","isAuthenticated","updateProfile","profileData","value","Provider","useAuth","context","withAuth","Component","requiredPermission","requiredRole","AuthenticatedComponent","props","className","PermissionGate","_ref2","fallback","adminOnly"],"sources":["X:/GitHub-Repo/fox-shrine-vtuber-website/fox-shrine-vtuber/src/hooks/useAuth.js"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\r\n\r\n// Authentication Context\r\nconst AuthContext = createContext(null);\r\n\r\n// API Base URL\r\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3002/api';\r\n\r\n// Authentication Provider Component\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Get stored token\r\n    const getStoredToken = () => {\r\n        return localStorage.getItem('foxshrine_access_token');\r\n    };\r\n\r\n    // Store token\r\n    const storeTokens = (tokens) => {\r\n        localStorage.setItem('foxshrine_access_token', tokens.accessToken);\r\n        localStorage.setItem('foxshrine_refresh_token', tokens.refreshToken);\r\n    };\r\n\r\n    // Clear stored tokens\r\n    const clearTokens = () => {\r\n        localStorage.removeItem('foxshrine_access_token');\r\n        localStorage.removeItem('foxshrine_refresh_token');\r\n    };\r\n\r\n    // API call helper with authentication\r\n    const apiCall = async (endpoint, options = {}) => {\r\n        const token = getStoredToken();\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            ...options.headers,\r\n        };\r\n\r\n        if (token) {\r\n            headers.Authorization = `Bearer ${token}`;\r\n        }\r\n\r\n        const response = await fetch(`${API_BASE_URL}${endpoint}`, {\r\n            ...options,\r\n            headers,\r\n        });\r\n\r\n        if (response.status === 401 && token) {\r\n            // Token expired, clear it and redirect to login\r\n            clearTokens();\r\n            setUser(null);\r\n            throw new Error('Session expired');\r\n        }\r\n\r\n        return response;\r\n    };\r\n\r\n    // Load user profile\r\n    const loadUserProfile = async () => {\r\n        try {\r\n            const token = getStoredToken();\r\n            if (!token) {\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const response = await apiCall('/auth/profile');\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                setUser(data.user);\r\n            } else {\r\n                clearTokens();\r\n                setUser(null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Failed to load user profile:', error);\r\n            clearTokens();\r\n            setUser(null);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Login function\r\n    const login = async (username, password) => {\r\n        try {\r\n            setError(null);\r\n            const response = await fetch(`${API_BASE_URL}/auth/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({ username, password }),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                storeTokens(data.tokens);\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Login failed');\r\n                return { success: false, error: data.error || 'Login failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Login error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    // Register function\r\n    const register = async (userData) => {\r\n        try {\r\n            setError(null);\r\n            const response = await fetch(`${API_BASE_URL}/auth/register`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(userData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                storeTokens(data.tokens);\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Registration failed');\r\n                return { success: false, error: data.error || 'Registration failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Registration error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    // Logout function\r\n    const logout = async () => {\r\n        try {\r\n            await apiCall('/auth/logout', { method: 'POST' });\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        } finally {\r\n            clearTokens();\r\n            setUser(null);\r\n        }\r\n    };\r\n\r\n    // Check if user has permission\r\n    const hasPermission = (permission) => {\r\n        return user && user.permissions && user.permissions.includes(permission);\r\n    };\r\n\r\n    // Check if user has role\r\n    const hasRole = (role) => {\r\n        return user && user.role === role;\r\n    };\r\n\r\n    // Check if user is admin (Admin or Super Admin)\r\n    const isAdmin = () => {\r\n        return user && (user.role === 'Admin' || user.role === 'Super Admin');\r\n    };\r\n\r\n    // Check if user is authenticated\r\n    const isAuthenticated = () => {\r\n        return !!user;\r\n    };\r\n\r\n    // Update user profile\r\n    const updateProfile = async (profileData) => {\r\n        try {\r\n            setError(null);\r\n            const response = await apiCall('/auth/profile', {\r\n                method: 'PUT',\r\n                body: JSON.stringify(profileData),\r\n            });\r\n\r\n            const data = await response.json();\r\n\r\n            if (response.ok) {\r\n                setUser(data.user);\r\n                return { success: true, user: data.user };\r\n            } else {\r\n                setError(data.error || 'Profile update failed');\r\n                return { success: false, error: data.error || 'Profile update failed' };\r\n            }\r\n        } catch (error) {\r\n            console.error('Profile update error:', error);\r\n            const errorMessage = 'Network error. Please try again.';\r\n            setError(errorMessage);\r\n            return { success: false, error: errorMessage };\r\n        }\r\n    };\r\n\r\n    // Load user on component mount\r\n    useEffect(() => {\r\n        loadUserProfile();\r\n    }, []);\r\n\r\n    const value = {\r\n        user,\r\n        loading,\r\n        error,\r\n        login,\r\n        register,\r\n        logout,\r\n        updateProfile,\r\n        hasPermission,\r\n        hasRole,\r\n        isAdmin,\r\n        isAuthenticated,\r\n        apiCall,\r\n        setError,\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n// Custom hook to use authentication\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n\r\n// Higher-order component for protected routes\r\nexport const withAuth = (Component, requiredPermission = null, requiredRole = null) => {\r\n    return function AuthenticatedComponent(props) {\r\n        const { user, loading, hasPermission, hasRole } = useAuth();\r\n\r\n        if (loading) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600\"></div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!user) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Access Denied!</strong>\r\n                        <span className=\"block sm:inline\"> You must be logged in to access this page.</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (requiredPermission && !hasPermission(requiredPermission)) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Permission Denied!</strong>\r\n                        <span className=\"block sm:inline\"> You don't have the required permission: {requiredPermission}</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (requiredRole && !hasRole(requiredRole)) {\r\n            return (\r\n                <div className=\"flex items-center justify-center min-h-screen\">\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded\">\r\n                        <strong className=\"font-bold\">Role Required!</strong>\r\n                        <span className=\"block sm:inline\"> You must have the role: {requiredRole}</span>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return <Component {...props} />;\r\n    };\r\n};\r\n\r\n// Permission-based component wrapper\r\nexport const PermissionGate = ({ \r\n    children, \r\n    permission = null, \r\n    role = null, \r\n    fallback = null, \r\n    adminOnly = false \r\n}) => {\r\n    const { user, hasPermission, hasRole, isAdmin } = useAuth();\r\n\r\n    if (!user) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (adminOnly && !isAdmin()) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (permission && !hasPermission(permission)) {\r\n        return fallback || null;\r\n    }\r\n\r\n    if (role && !hasRole(role)) {\r\n        return fallback || null;\r\n    }\r\n\r\n    return children;\r\n};\r\n\r\nexport default AuthContext;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}